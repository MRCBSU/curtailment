# When you add documentation in the function file, run devtools::document() and roxygen will convert it into "real" documentation:
devtools::document()
prob.vec <- findProbVec(Bsize=2, pt=0.4, qt=0.6, pc=0.1, qc=0.9)
################ Function for finding the Prob(reponses on treatment + non-responses on control)=0, 1, 2,... Bsize:
findProbVec <- function(Bsize, pt=pt, qt=qt, pc=pc, qc=qc){
prob.vec <- rep(NA, Bsize+1)
for(i in 1:(Bsize+1)){
positives <- i-1
full.vec <- expand.grid(rep(list(0:1), Bsize))
positive.mat <- full.vec[rowSums(full.vec) == positives,]
negative.mat <- -1*(positive.mat-1)
positive.vec <- rep(c(pt,qc), each=Bsize/2)
negative.vec <- rep(c(qt,pc), each=Bsize/2)
posneg.mat <- t(t(positive.mat)*positive.vec) + t(t(negative.mat)*negative.vec)
prob.vec[i] <- sum(apply(posneg.mat, 1, prod))
}
if(sum(prob.vec)-1 > 1e-8) stop("Probabilities do not sum to 1.")
prob.vec
}
prob.vec <- findProbVec(Bsize=2, pt=0.4, qt=0.6, pc=0.1, qc=0.9)
prob.vec
pt=0.4; qt=0.6;pc=0.1;qc=0.9
prob0 <- qt*pc
prob1 <- pt*pc + qt*qc
prob2 <- pt*qc
c(prob0, prob1, prob2)
getwd()
source("R/2arm_1-reproduce-results-functions-find-designs.R")
source("R/2arm_3-reproduce-results-functions-for-tables-plots.R")
x4 <- twoarmDesign(nmin=20,
nmax=24,
block.size=4,
pc=0.05,
pt=0.4,
alpha=0.2,
power=0.7,
maxthetaF=NULL,
minthetaE=0.7,
max.combns=1e3)
x4
drawDiagram(x4)
source("R/singlearm_functions.R")
drawDiagram(x4)
2
drawDiagram(x4)
findBlockCP
source("R/2arm_1-reproduce-results-functions-find-designs.R")
source("R/2arm_3-reproduce-results-functions-for-tables-plots.R")
source("R/singlearm_functions.R")
drawDiagram(x4)
library(ggplot2)
drawDiagram(x4)
x4
